--[[
FFFFFFFFF    UU      UU    NN      NN    CCCCCCCC    TTTTTTTTTT    IIIIIIIII    OOOOOOOOO    NNN      NN    SSSSSSSS
FF          UU      UU    NNN     NN   CC                TT          II      OO        OO   NNNN     NN  SS        
FFFFFFFFF   UU      UU    NN  NN  NN   CC                TT          II      OO        OO   NN NN    NN   SSSSSSS 
FF           UU    UU     NN    NNNN   CC                TT          II      OO        OO   NN  NN   NN         SS
FF             UUUU       NN      NN    CCCCCCCC        TT        IIIIIIIII    OOOOOOOOO    NN    NNNN    SSSSSSSS

]]--

function msg(a)
print(a)
end

--ESP
local nesp = false
local hesp = false
local desp = false

local function name(parent, text, plr)
    if nesp then
        if not parent:FindFirstChild("BillName") then
        local e = Instance.new("BillboardGui", parent)
        local i = Instance.new("TextLabel", e)
        
        e.AlwaysOnTop = true
        e.ResetOnSpawn = false
        e.Name = "BillName"
        e.LightInfluence = 0
        e.Size = UDim2.new(0, 10, 0, 10)
        
        i.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        i.Text = text
        i.Size = UDim2.new(0.0001, 0.00001, 0.0001, 0.00001)
        i.BorderSizePixel = 4
        i.LineHeight = 2
        i.Name = plr.Name
        i.BorderColor3 = Color3.new(255, 10, 30)
        i.BorderSizePixel = 0
        i.Font = "SourceSans"
        i.TextSize = 15
        i.TextStrokeTransparency = 0
        
        local function updateColor()
            local teamColor = plr.TeamColor.Color
            i.TextColor3 = teamColor
        end
        
        updateColor() -- Actualizar el color del texto al crearlo
        
        plr:GetPropertyChangedSignal("TeamColor"):Connect(updateColor)
    end
    end
end

local function health(parent, text, hum)
    if hesp then
        if not parent:FindFirstChild("BillHP") then
        local e = Instance.new("BillboardGui", parent)
        local i = Instance.new("TextLabel", e)
        
        e.AlwaysOnTop = true
        e.ResetOnSpawn = false
        e.Name = "BillHP"
        e.LightInfluence = 0
        e.Size = UDim2.new(0, 10, 0, 10)
        
        i.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        i.Size = UDim2.new(0.0001, 0.00001, 0.0001, 0.00001)
        i.BorderSizePixel = 4
        i.Name = "Health"
        i.LineHeight = 0
        i.BorderColor3 = Color3.new(255, 10, 30)
        i.BorderSizePixel = 0
        i.Font = "SourceSans"
        i.TextXAlignment = "Right"
        i.TextSize = 15
        i.TextStrokeTransparency = 0
        i.TextColor3 = Color3.fromRGB(0, 255, 0)
        
        local function updateHealth()
            i.Text = "|HP|: " .. math.floor(hum.Health)
        end
        
        updateHealth() -- Actualizar el texto al crearlo
        
        hum:GetPropertyChangedSignal("Health"):Connect(updateHealth)
    end
    end
end

local function distance(parent, text, head)
    if desp then
        if not parent:FindFirstChild("BillDistance") then
        local e = Instance.new("BillboardGui", parent)
        local i = Instance.new("TextLabel", e)
        
        e.AlwaysOnTop = true
        e.ResetOnSpawn = false
        e.Name = "BillDistance"
        e.LightInfluence = 0
        e.Size = UDim2.new(0, 10, 0, 10)
        
        i.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        i.Size = UDim2.new(0.0001, 0.00001, 0.0001, 0.00001)
        i.BorderSizePixel = 4
        i.Name = "Studs"
        i.LineHeight = 0
        i.BorderColor3 = Color3.new(255, 10, 30)
        i.BorderSizePixel = 0
        i.Font = "SourceSans"
        i.TextXAlignment = "Left"
        i.TextSize = 15
        i.TextStrokeTransparency = 0
        i.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        local function updateDistance()
            local distanceValue = (game.Players.LocalPlayer.Character.Head.Position - head.Position).magnitude
            i.Text = "   |" .. math.floor(distanceValue) .. "|"
        end
        
        game:GetService("RunService").Heartbeat:Connect(function()
            updateDistance()
        end)
    end
    end
end

local function updateESPSettings()
    for i, plr in pairs(game.Players:GetPlayers()) do
        if plr ~= game.Players.LocalPlayer then
            local char = plr.Character
            if char then
                local humanoid = char:FindFirstChild("Humanoid")
                if humanoid then
                    local head = char:FindFirstChild("Head")
                    if head then
                        if nesp then
                            name(head, plr.Name, plr)
                        else
                            local billName = head:FindFirstChild("BillName")
                            if billName then
                                billName:Destroy()
                            end
                        end
                        
                        if hesp then
                            health(head, math.floor(humanoid.Health), humanoid)
                        else
                            local billHP = head:FindFirstChild("BillHP")
                            if billHP then
                                billHP:Destroy()
                            end
                        end
                        
                        if desp then
                            local distanceValue = (game.Players.LocalPlayer.Character.Head.Position - head.Position).magnitude
                            distance(head, distanceValue, head)
                        else
                            local billDistance = head:FindFirstChild("BillDistance")
                            if billDistance then
                                billDistance:Destroy()
                            end
                        end
                    end
                end
            end
        end
    end
end

nesp.Changed:Connect(function()
updateESPSettings()
end)

hesp.Changed:Connect(function()
updateESPSettings()
end)

desp.Changed:Connect(function()
updateESPSettings()
end)
---------------------------CLOSE ESP
